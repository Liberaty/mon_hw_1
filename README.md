# Домашнее задание к занятию 13 «Введение в мониторинг»

## Обязательные задания

1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя платформу для вычислений с выдачей текстовых отчётов, которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?

***Ответ***

	1. **HTTP-метрики** :
    - Количество запросов (всех типов — 2xx, 3xx, 4xx, 5xx).
    - Время ответа сервера.
    - Размер передаваемых данных (запросы/ответы) 
    
    Данные показатели позволят оценить производительность системы с точки зрения клиентов

	2. **CPU загрузка** :
    
    - Средняя загрузка CPU за последние 1, 5 и 15 минут (`load average`).
    - Использование CPU (%) по процессам или общее использование.

    Вычисления сильно нагружают CPU, поэтому его мониторинг особенно критичен для понимания производительности.
  
	3. **Дисковые метрики** :
    
    - Использованное пространство на диске.
    - Скорость записи/чтения файлов.
    - Количество свободных inode'ов.
    
    Текстовые отчеты сохраняются на диск, поэтому важно отслеживать доступность места и производительность диска.

	4. **RAM использование** :
    
    - Общий объем RAM.
    - Использованный объем RAM.
    - Доступная память.
    
    Нехватка оперативной памяти может привести к ошибкам, снижению производительности или падению сервиса.


2. Менеджер продукта, посмотрев на ваши метрики, сказал, что ему непонятно, что такое RAM/inodes/CPUla. Также он сказал, что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы можете ему предложить?

***Ответ***

	1. **SLA по времени ответа** :
    - Процент запросов, которые обрабатываются быстрее определенного порога (например, менее 1 секунды).
	2. **Процент успешных запросов** :
    - Отношение количества успешных запросов (2xx) ко всем запросам.
	3. **Количество клиентских запросов** :
    - Общее количество запросов за период времени.
	4. **Статистика отказов** :
    - Количество ошибок (если они есть) с детализацией по типам кодов ответа (например, 4xx/5xx).
	5. **График работы системы** :
    - Загрузка CPU, RAM и диска в реальном времени или за период времени.
	6. **Информация о времени простоя** :
    - Время, когда система не была доступна клиентам.
    
3. Вашей DevOps-команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики, в свою очередь, хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?

***Ответ***

    Самым простым решением будет реализация точечного доступа к логам на боевых VM или контейнерах и будут сами за ними смотреть (доступ к конкретным логам и только на чтение)

4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA = 99% по http-кодам ответов. 
Этот параметр вычисляется по формуле: summ_2xx_requests/summ_all_requests. Он не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

***Ответ***

    При расчетах не учтены коды 3хх вероятно на них приходиться 29% доли запросов пользователей
    Исправленная формула SLA = (summ_2xx_requests + summ_3xx_requests) / summ_all_requests
    также при расчетах не учтены и другие показатели которые прямо или косвенно влияют на общую картину.